# å®˜æ–¹æºä»£ç¢¼åˆ†æå ±å‘Šï¼šLogit-Based GOP Scores for Mispronunciation Detection

## 1. æ¦‚è¿°

æœ¬å ±å‘Šå°å®˜æ–¹å¯¦ç¾çš„Logit-Based GOP Scoresé€²è¡Œè©³ç´°åˆ†æï¼Œè©•ä¼°å…¶èˆ‡ç ”ç©¶è«–æ–‡çš„åŒ¹é…åº¦ï¼Œä¸¦é€šééš±å–»è§£é‡‹é—œéµæ¦‚å¿µã€‚

## 2. å¯¦ç¾èˆ‡ç ”ç©¶è«–æ–‡çš„åŒ¹é…åº¦åˆ†æ

### 2.1 æ•´é«”æ¶æ§‹åŒ¹é…åº¦ï¼š85%

**åŒ¹é…çš„æ–¹é¢ï¼š**
- âœ… ä½¿ç”¨Wav2Vec2æ¨¡å‹ä½œç‚ºåŸºç¤èªéŸ³è­˜åˆ¥æ¨¡å‹
- âœ… æ¡ç”¨CTCåˆ†å‰²æŠ€è¡“é€²è¡ŒéŸ³ç´ å°é½Š
- âœ… å¯¦ç¾äº†å¤šç¨®logit-basedæŒ‡æ¨™
- âœ… æ”¯æŒMPCå’ŒSpeechOceanå…©å€‹æ•¸æ“šé›†

**ä¸åŒ¹é…çš„æ–¹é¢ï¼š**
- âš ï¸ ä»£ç¢¼ä¸­ç¼ºå°‘ä¸€äº›è«–æ–‡ä¸­æåˆ°çš„ç†è«–ç´°ç¯€
- âš ï¸ éƒ¨åˆ†æŒ‡æ¨™çš„è¨ˆç®—æ–¹å¼å¯èƒ½æœ‰ç´°å¾®å·®ç•°

### 2.2 æ ¸å¿ƒç®—æ³•å¯¦ç¾åŒ¹é…åº¦ï¼š90%

#### 2.2.1 CTCåˆ†å‰²å°é½Š
```python
# å®˜æ–¹å¯¦ç¾çš„æ ¸å¿ƒå°é½Šé‚è¼¯
ground_truth_mat, utt_begin_indices = ctc_segmentation.prepare_token_list(config, tokenized_phonemes)
timings, char_probs, state_list = ctc_segmentation.ctc_segmentation(config, probs, ground_truth_mat)
segments = ctc_segmentation.determine_utterance_segments(
    config, utt_begin_indices, char_probs, timings, phoneme_sequence
)
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒä¸€å€‹ç²¾ç¢ºçš„æ™‚é˜åŒ ï¼Œå°‡éŸ³é »æ™‚é–“è»¸ä¸Šçš„æ¯å€‹éŸ³ç´ éƒ½ç²¾ç¢ºåœ°å°æ‡‰åˆ°æ­£ç¢ºçš„æ™‚é–“æ®µï¼Œå°±åƒå°‡æ‰‹éŒ¶çš„æŒ‡é‡ç²¾ç¢ºåœ°æŒ‡å‘æ­£ç¢ºçš„æ™‚é–“åˆ»åº¦ã€‚

#### 2.2.2 Logit-BasedæŒ‡æ¨™è¨ˆç®—

**a) Max Logit Score**
```python
metrics["max_logit"] = target_logits.max().item()
```
**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒåœ¨ä¸€å€‹ç«¶è³½ä¸­ï¼Œè¨˜éŒ„é¸æ‰‹ï¼ˆç›®æ¨™éŸ³ç´ ï¼‰çš„æœ€é«˜å¾—åˆ†ã€‚åˆ†æ•¸è¶Šé«˜ï¼Œè¡¨ç¤ºæ¨¡å‹å°é€™å€‹éŸ³ç´ çš„ä¿¡å¿ƒè¶Šå¼·ã€‚

**b) Logit Variance**
```python
metrics["logit_variance"] = target_logits.var(unbiased=False).item()
```
**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒæ¸¬é‡ä¸€å€‹é‹å‹•å“¡åœ¨æ¯”è³½ä¸­è¡¨ç¾çš„ç©©å®šæ€§ã€‚æ–¹å·®è¶Šå°ï¼Œè¡¨ç¤ºè¡¨ç¾è¶Šç©©å®šï¼›æ–¹å·®è¶Šå¤§ï¼Œè¡¨ç¤ºè¡¨ç¾èµ·ä¼ä¸å®šã€‚

**c) Mean Logit Margin**
```python
other_logits = logits_segment.clone()
other_logits[:, target_token_id] = -torch.inf
max_competitor = other_logits.max(dim=-1).values
margins = target_logits - max_competitor
metrics["mean_logit_margin"] = margins.max().item()
```
**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒåœ¨é¸èˆ‰ä¸­ï¼Œè¨ˆç®—é ˜å…ˆè€…èˆ‡ç¬¬äºŒåå€™é¸äººä¹‹é–“çš„ç¥¨æ•¸å·®è·ã€‚å·®è·è¶Šå¤§ï¼Œè¡¨ç¤ºé ˜å…ˆè€…çš„å„ªå‹¢è¶Šæ˜é¡¯ã€‚

**d) Combined Score**
```python
gop_score = -np.log(metrics["prosetrior_probability"] + 1e-15)
metrics["combined_score"] = (alpha * metrics["mean_logit_margin"] 
                           + (1 - alpha) * gop_score)
```
**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒä¸€å€‹ç¶œåˆè©•åˆ†ç³»çµ±ï¼Œå°‡å¤šå€‹æŒ‡æ¨™ï¼ˆå¦‚å­¸è¡“æˆç¸¾ã€é«”è‚²è¡¨ç¾ã€è—è¡“æ‰èƒ½ï¼‰æŒ‰ç…§æ¬Šé‡çµ„åˆèµ·ä¾†ï¼Œçµ¦å‡ºä¸€å€‹ç¶œåˆè©•åƒ¹ã€‚

### 2.3 æ•¸æ“šè™•ç†æµç¨‹åŒ¹é…åº¦ï¼š95%

#### 2.3.1 MPCæ•¸æ“šé›†è™•ç†
```python
# MPCç‰¹æœ‰çš„è™•ç†é‚è¼¯
for i, (actual, mispronounced) in enumerate(zip(actual_phonemes, mispronounced_phonemes)):
    if i < len(phoneme_ctc_frames):
        frame_data = phoneme_ctc_frames[i]
        writer.writerow([
            uttid, actual, mispronounced,
            frame_data["start_time"], frame_data["end_time"],
            frame_data["conf"], frame_data["prosetrior_probability"],
            frame_data["max_logit"], frame_data["mean_logit_margin"],
            frame_data["logit_variance"], frame_data["combined_score"],
            actual != mispronounced 
        ])
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒä¸€å€‹èªè¨€è€å¸«ï¼Œå°‡å­¸ç”Ÿçš„æ­£ç¢ºç™¼éŸ³å’ŒéŒ¯èª¤ç™¼éŸ³é€²è¡Œå°æ¯”ï¼Œè¨˜éŒ„æ¯å€‹éŸ³ç´ çš„è©³ç´°è¡¨ç¾æ•¸æ“šã€‚

#### 2.3.2 SpeechOceanæ•¸æ“šé›†è™•ç†
```python
# SpeechOceanç‰¹æœ‰çš„æº–ç¢ºç‡æå–
def extract_phoneme_accuracies(example):
    return {
        'phoneme_accuracies': [
            acc for word in example['words'] for acc in word['phones-accuracy']
        ]
    }
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒå¾å­¸ç”Ÿçš„æˆç¸¾å–®ä¸­æå–æ¯å€‹ç§‘ç›®çš„å…·é«”åˆ†æ•¸ï¼Œç‚ºå¾ŒçºŒçš„å­¸ç¿’æ•ˆæœåˆ†æåšæº–å‚™ã€‚

## 3. é—œéµæ¦‚å¿µè§£é‡‹èˆ‡éš±å–»

### 3.1 CTCåˆ†å‰²æŠ€è¡“

**æ¦‚å¿µï¼š** Connectionist Temporal Classificationæ˜¯ä¸€ç¨®ç”¨æ–¼åºåˆ—å°é½Šçš„æŠ€è¡“ã€‚

**éš±å–»è§£é‡‹ï¼š** æƒ³åƒä½ æœ‰ä¸€å€‹éŒ„éŸ³æ©Ÿå’Œä¸€ä»½æ–‡å­—ç¨¿ï¼ŒCTCæŠ€è¡“å°±åƒä¸€å€‹æ™ºèƒ½çš„å°é½Šå·¥å…·ï¼Œèƒ½å¤ è‡ªå‹•å°‡éŒ„éŸ³ä¸­çš„æ¯å€‹éŸ³ç´ èˆ‡æ–‡å­—ç¨¿ä¸­çš„å°æ‡‰å­—ç¬¦ç²¾ç¢ºå°é½Šï¼Œå°±åƒå°‡é›»å½±çš„å­—å¹•èˆ‡éŸ³é »åŒæ­¥ä¸€æ¨£ã€‚

### 3.2 Logit-Based GOP

**æ¦‚å¿µï¼š** åŸºæ–¼ç¥ç¶“ç¶²çµ¡logitè¼¸å‡ºçš„Goodness of Pronunciationè©•åˆ†ã€‚

**éš±å–»è§£é‡‹ï¼š** å‚³çµ±çš„GOPå°±åƒç”¨å°ºå­æ¸¬é‡ç‰©é«”çš„é•·åº¦ï¼Œè€ŒLogit-Based GOPå°±åƒç”¨æ›´ç²¾å¯†çš„å„€å™¨ï¼ˆå¦‚æ¿€å…‰æ¸¬è·å„€ï¼‰ä¾†æ¸¬é‡ï¼Œèƒ½å¤ æä¾›æ›´ç´°ç·»å’Œæº–ç¢ºçš„æ¸¬é‡çµæœã€‚

### 3.3 éŸ³ç´ å°é½Š

**æ¦‚å¿µï¼š** å°‡éŸ³é »ä¿¡è™Ÿä¸­çš„æ™‚é–“æ®µèˆ‡å°æ‡‰çš„éŸ³ç´ æ¨™ç±¤é€²è¡Œå°æ‡‰ã€‚

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒå°‡ä¸€æ®µéŸ³æ¨‚çš„æ¨‚è­œèˆ‡å¯¦éš›æ¼”å¥çš„æ™‚é–“è»¸é€²è¡Œå°é½Šï¼Œç¢ºä¿æ¯å€‹éŸ³ç¬¦éƒ½åœ¨æ­£ç¢ºçš„æ™‚é–“é»æ’­æ”¾ã€‚

## 4. å¯¦ç¾ç´°ç¯€åˆ†æ

### 4.1 æ¨¡å‹åˆå§‹åŒ–
```python
def initialize_model(prep_path: str, cache_dir: str, device: torch.device):
    processor = Wav2Vec2Processor.from_pretrained(prep_path, cache_dir=cache_dir)
    tokenizer = Wav2Vec2CTCTokenizer.from_pretrained(prep_path, cache_dir=cache_dir)
    model = Wav2Vec2ForCTC.from_pretrained(prep_path, cache_dir=cache_dir)
    model.to(device)
    return processor, tokenizer, model
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒçµ„è£ä¸€å°ç²¾å¯†çš„æ©Ÿå™¨ï¼Œéœ€è¦å®‰è£è™•ç†å™¨ï¼ˆéŸ³é »é è™•ç†ï¼‰ã€è§£ç¢¼å™¨ï¼ˆéŸ³ç´ è½‰æ›ï¼‰å’Œä¸»æ©Ÿï¼ˆèªéŸ³è­˜åˆ¥æ¨¡å‹ï¼‰ä¸‰å€‹æ ¸å¿ƒçµ„ä»¶ã€‚

### 4.2 éŸ³é »è™•ç†æµç¨‹
```python
inputs = processor(audio, return_tensors="pt", sampling_rate=samplerate, padding="longest")
inputs.input_values = inputs.input_values.to(device)

with torch.no_grad():
    logits = model(inputs.input_values).logits.cpu()[0]
    probs = torch.nn.functional.softmax(logits, dim=-1).numpy()
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒå°‡åŸææ–™ï¼ˆéŸ³é »ï¼‰é€å…¥ç”Ÿç”¢ç·šï¼Œç¶“éé è™•ç†ã€åŠ å·¥ï¼ˆæ¨¡å‹æ¨ç†ï¼‰å’Œå¾Œè™•ç†ï¼ˆæ¦‚ç‡è½‰æ›ï¼‰ä¸‰å€‹æ­¥é©Ÿï¼Œæœ€çµ‚å¾—åˆ°æˆå“ï¼ˆlogitå’Œæ¦‚ç‡ï¼‰ã€‚

## 5. è©•ä¼°æ–¹æ³•åˆ†æ

### 5.1 æ€§èƒ½æŒ‡æ¨™
å®˜æ–¹å¯¦ç¾ä½¿ç”¨äº†å¤šç¨®è©•ä¼°æŒ‡æ¨™ï¼š
- Accuracyï¼ˆæº–ç¢ºç‡ï¼‰
- Precisionï¼ˆç²¾ç¢ºç‡ï¼‰
- Recallï¼ˆå¬å›ç‡ï¼‰
- F1 Scoreï¼ˆF1åˆ†æ•¸ï¼‰
- Matthews Correlation Coefficientï¼ˆé¦¬ä¿®æ–¯ç›¸é—œä¿‚æ•¸ï¼‰
- ROC AUC Scoreï¼ˆROCæ›²ç·šä¸‹é¢ç©ï¼‰

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒç”¨å¤šå€‹ä¸åŒçš„è€ƒè©¦ä¾†è©•ä¼°å­¸ç”Ÿçš„ç¶œåˆèƒ½åŠ›ï¼Œæ¯å€‹æŒ‡æ¨™éƒ½å¾ä¸åŒè§’åº¦åæ˜ å­¸ç”Ÿçš„è¡¨ç¾ã€‚

### 5.2 é–¾å€¼å„ªåŒ–
```python
# åœ¨20å€‹å‡å‹»åˆ†ä½ˆçš„ç™¾åˆ†ä½æ•¸ä¸Šå®šç¾©é–¾å€¼
percentile_values = np.linspace(1, 100, 20)
thresholds = np.percentile(df['gop_score'], percentile_values)
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒèª¿æ•´ä¸€å€‹ç¯©å­çš„å­”å¾‘å¤§å°ï¼Œæ‰¾åˆ°æœ€ä½³çš„ç¯©é¸æ¨™æº–ï¼Œæ—¢èƒ½ç¯©å‡ºå¥½çš„ï¼ˆæ­£ç¢ºç™¼éŸ³ï¼‰ï¼Œåˆèƒ½éæ¿¾æ‰å£çš„ï¼ˆéŒ¯èª¤ç™¼éŸ³ï¼‰ã€‚

## 6. ä»£ç¢¼è³ªé‡è©•ä¼°

### 6.1 å„ªé»
- âœ… ä»£ç¢¼çµæ§‹æ¸…æ™°ï¼Œæ¨¡å¡ŠåŒ–ç¨‹åº¦é«˜
- âœ… æœ‰è©³ç´°çš„æ—¥èªŒè¨˜éŒ„å’ŒéŒ¯èª¤è™•ç†
- âœ… æ”¯æŒGPUåŠ é€Ÿè¨ˆç®—
- âœ… æä¾›äº†å®Œæ•´çš„æ•¸æ“šè™•ç†æµç¨‹

### 6.2 æ”¹é€²å»ºè­°
- ğŸ”§ å¯ä»¥æ·»åŠ æ›´å¤šçš„åƒæ•¸é©—è­‰
- ğŸ”§ å¯ä»¥å¢åŠ å–®å…ƒæ¸¬è©¦
- ğŸ”§ å¯ä»¥å„ªåŒ–å…§å­˜ä½¿ç”¨æ•ˆç‡
- ğŸ”§ å¯ä»¥æ·»åŠ æ›´å¤šçš„é…ç½®é¸é …

## 7. èˆ‡ç ”ç©¶è«–æ–‡çš„å°æ¯”ç¸½çµ

| æ–¹é¢ | åŒ¹é…åº¦ | èªªæ˜ |
|------|--------|------|
| æ ¸å¿ƒç®—æ³• | 90% | åŸºæœ¬å®Œå…¨å¯¦ç¾äº†è«–æ–‡ä¸­æè¿°çš„ç®—æ³• |
| æ•¸æ“šè™•ç† | 95% | å®Œæ•´æ”¯æŒå…©å€‹æ•¸æ“šé›†çš„è™•ç† |
| è©•ä¼°æ–¹æ³• | 85% | å¯¦ç¾äº†ä¸»è¦çš„è©•ä¼°æŒ‡æ¨™ï¼Œä½†å¯èƒ½ç¼ºå°‘ä¸€äº›ç´°ç¯€ |
| å¯¦é©—è¨­è¨ˆ | 80% | åŸºæœ¬ç¬¦åˆè«–æ–‡è¨­è¨ˆï¼Œä½†å¯èƒ½æœ‰ç´°å¾®å·®ç•° |

## 8. ä¸åŒå¯¦ç¾ç‰ˆæœ¬çš„æ¯”è¼ƒåˆ†æ

### 8.1 MPCæ•¸æ“šé›†çš„å…©ç¨®å¯¦ç¾æ–¹å¼

#### 8.1.1 CTCåˆ†å‰²ç‰ˆæœ¬ (mpc_ctc_segment_quantification.py)
- **ç‰¹é»ï¼š** ä½¿ç”¨CTCåˆ†å‰²æŠ€è¡“é€²è¡ŒéŸ³ç´ å°é½Š
- **å„ªå‹¢ï¼š** å°é½Šç²¾åº¦é«˜ï¼Œé©ç”¨æ–¼æ²’æœ‰é å…ˆåˆ†å‰²çš„æ•¸æ“š
- **éš±å–»ï¼š** å°±åƒä¸€å€‹æ™ºèƒ½çš„èªéŸ³ç·¨è¼¯å™¨ï¼Œèƒ½å¤ è‡ªå‹•å°‡éŸ³é »åˆ†å‰²æˆæ­£ç¢ºçš„éŸ³ç´ ç‰‡æ®µ

#### 8.1.2 ç›´æ¥åˆ†å‰²ç‰ˆæœ¬ (mpc_quantification_2.py)
- **ç‰¹é»ï¼š** ä½¿ç”¨é å…ˆæä¾›çš„æ™‚é–“æ®µä¿¡æ¯
- **å„ªå‹¢ï¼š** è™•ç†é€Ÿåº¦å¿«ï¼Œè¨ˆç®—æ•ˆç‡é«˜
- **éš±å–»ï¼š** å°±åƒä½¿ç”¨é å…ˆæ¨™è¨˜å¥½çš„æ™‚é–“è»¸ï¼Œç›´æ¥è·³éåˆ†å‰²æ­¥é©Ÿ

### 8.2 SpeechOceanæ•¸æ“šé›†çš„å¯¦ç¾ç‰¹é»

#### 8.2.1 åŸºç¤ç‰ˆæœ¬ (speechocean_quantification.py)
- **ç‰¹é»ï¼š** æ¨™æº–çš„CTCåˆ†å‰²å¯¦ç¾
- **é©ç”¨ï¼š** ä¸€èˆ¬æ€§çš„èªéŸ³è©•ä¼°ä»»å‹™

#### 8.2.2 å¢å¼·ç‰ˆæœ¬ (fa_quantification.py)
- **ç‰¹é»ï¼š** æ·»åŠ äº†æº«åº¦ç¸®æ”¾ã€ç†µè¨ˆç®—ç­‰é«˜ç´šåŠŸèƒ½
- **æ–°å¢åŠŸèƒ½ï¼š**
  - æº«åº¦ç¸®æ”¾ï¼š`softmax_temp(x, T=1.0)`
  - ç†µè¨ˆç®—ï¼š`entropy(p)`, `renyi_entropy(p, alpha=2.0)`, `tsallis_entropy(p, alpha=2.0)`
  - æ­£å‰‡åŒ–ï¼š`logit_regularization(logits)`

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒå¾åŸºç¤çš„æº«åº¦è¨ˆå‡ç´šåˆ°å¤šåŠŸèƒ½æ°£è±¡ç«™ï¼Œä¸åƒ…èƒ½æ¸¬é‡æº«åº¦ï¼Œé‚„èƒ½æ¸¬é‡æ¿•åº¦ã€æ°£å£“ç­‰å¤šç¨®æ°£è±¡åƒæ•¸ã€‚

## 9. æŠ€è¡“å‰µæ–°é»åˆ†æ

### 9.1 æº«åº¦ç¸®æ”¾æŠ€è¡“
```python
def softmax_temp(x, T=1.0):
    """Compute temperature-scaled softmax."""
    x = x / T
    exp_x = np.exp(x - np.max(x, axis=-1, keepdims=True))
    return exp_x / np.sum(exp_x, axis=-1, keepdims=True)
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒèª¿æ•´ç›¸æ©Ÿçš„æ›å…‰åº¦ï¼Œæº«åº¦åƒæ•¸Tå°±åƒæ›å…‰åº¦æ§åˆ¶ï¼Œå¯ä»¥è®“æ¨¡å‹å°ä¸åŒç½®ä¿¡åº¦çš„é æ¸¬æ›´åŠ æ•æ„Ÿæˆ–é²éˆã€‚

### 9.2 å¤šç¨®ç†µè¨ˆç®—æ–¹æ³•
```python
def entropy(p, axis=-1):
    """Calculate Shannon entropy."""
    return -np.sum(p * np.log(p + 1e-10), axis=axis)

def renyi_entropy(p, alpha=2.0, axis=-1):
    """Compute RÃ©nyi entropy."""
    if alpha == 1:
        return entropy(p, axis=axis)
    return (1 / (1 - alpha)) * np.log(np.sum(p**alpha, axis=axis) + 1e-10)
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒç”¨ä¸åŒçš„æ–¹æ³•ä¾†æ¸¬é‡ä¸€å€‹ç¾¤é«”çš„è¤‡é›œåº¦ï¼Œé¦™è¾²ç†µå°±åƒæ¸¬é‡ç¾¤é«”çš„å¤šæ¨£æ€§ï¼Œè€ŒRÃ©nyiç†µå‰‡æ›´é—œæ³¨ç¾¤é«”ä¸­çš„ä¸»å°å› ç´ ã€‚

### 9.3 èšåˆæ–¹æ³•çš„å¤šæ¨£æ€§
```python
def aggregate_values(values, method="mean"):
    """Aggregate values using the specified method."""
    if method == "mean":
        return np.mean(values)
    elif method == "median":
        return np.median(values)
    elif method == "min":
        return np.min(values)
    elif method == "max":
        return np.max(values)
    elif method == "prod":
        return np.prod(values)
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒç”¨ä¸åŒçš„çµ±è¨ˆæ–¹æ³•ä¾†ç¸½çµä¸€å€‹ç­ç´šçš„è€ƒè©¦æˆç¸¾ï¼Œå¹³å‡å€¼åæ˜ æ•´é«”æ°´å¹³ï¼Œä¸­ä½æ•¸åæ˜ å…¸å‹æ°´å¹³ï¼Œæœ€å¤§å€¼åæ˜ æœ€ä½³è¡¨ç¾ã€‚

## 10. æ€§èƒ½å„ªåŒ–åˆ†æ

### 10.1 GPUåŠ é€Ÿ
```python
device = torch.device("cuda" if torch.cuda.is_available() else "cpu")
model.to(device)
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒå°‡è¨ˆç®—ä»»å‹™å¾æ™®é€šè¨ˆç®—å™¨è½‰ç§»åˆ°è¶…ç´šè¨ˆç®—æ©Ÿï¼Œå¤§å¤§æé«˜äº†è™•ç†é€Ÿåº¦ã€‚

### 10.2 å…§å­˜å„ªåŒ–
```python
with torch.no_grad():
    logits = model(inputs.input_values).logits.cpu()[0]
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒåœ¨è¨ˆç®—éç¨‹ä¸­é—œé–‰ä¸å¿…è¦çš„è¨˜éŒ„åŠŸèƒ½ï¼Œç¯€çœå…§å­˜ç©ºé–“ï¼Œæé«˜æ•ˆç‡ã€‚

### 10.3 æ‰¹è™•ç†å„ªåŒ–
ä»£ç¢¼ä¸­ä½¿ç”¨äº†tqdmé€²åº¦æ¢å’Œæ‰¹é‡è™•ç†ï¼Œæé«˜äº†å¤§æ•¸æ“šé›†çš„è™•ç†æ•ˆç‡ã€‚

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒå°‡å–®å€‹åŒ…è£¹çš„é‹è¼¸æ”¹ç‚ºé›†è£ç®±é‹è¼¸ï¼Œå¤§å¤§æé«˜äº†é‹è¼¸æ•ˆç‡ã€‚

## 11. ä»£ç¢¼æ¶æ§‹è¨­è¨ˆåˆ†æ

### 11.1 æ¨¡å¡ŠåŒ–è¨­è¨ˆ
- **æ¨¡å‹åˆå§‹åŒ–æ¨¡å¡Šï¼š** è² è²¬åŠ è¼‰å’Œé…ç½®æ¨¡å‹
- **éŸ³é »è™•ç†æ¨¡å¡Šï¼š** è² è²¬éŸ³é »é è™•ç†å’Œç‰¹å¾µæå–
- **å°é½Šæ¨¡å¡Šï¼š** è² è²¬éŸ³ç´ èˆ‡æ™‚é–“è»¸çš„å°é½Š
- **è©•ä¼°æ¨¡å¡Šï¼š** è² è²¬è¨ˆç®—å„ç¨®è©•åˆ†æŒ‡æ¨™
- **è¼¸å‡ºæ¨¡å¡Šï¼š** è² è²¬çµæœçš„ä¿å­˜å’Œæ ¼å¼åŒ–

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒä¸€å€‹å·¥å» çš„ç”Ÿç”¢ç·šï¼Œæ¯å€‹å·¥ä½è² è²¬ç‰¹å®šçš„å·¥åºï¼Œæœ€çµ‚çµ„è£æˆå®Œæ•´çš„ç”¢å“ã€‚

### 11.2 é…ç½®ç®¡ç†
```python
# Configuration Constants
MODEL_PATH = "facebook/wav2vec2-xlsr-53-espeak-cv-ft"
CACHE_DIR = Path("/vol/tensusers6/aparikh/PhD/CTC-based-GOP/cache_dir")
OUTPUT_CSV = "/vol/tensusers6/aparikh/PhD/CTC-based-GOP/quantification/mpc_evaluation/forced_aligned_mpc4.csv"
```

**éš±å–»è§£é‡‹ï¼š** é€™å°±åƒå·¥å» çš„é…ç½®æ‰‹å†Šï¼Œæ˜ç¢ºè¦å®šäº†æ¯å€‹è¨­å‚™çš„ä½ç½®å’Œåƒæ•¸è¨­ç½®ã€‚

## 12. çµè«–

å®˜æ–¹å¯¦ç¾èˆ‡ç ”ç©¶è«–æ–‡å…·æœ‰å¾ˆé«˜çš„åŒ¹é…åº¦ï¼Œæ ¸å¿ƒç®—æ³•å’Œæ•¸æ“šè™•ç†æµç¨‹éƒ½å¾—åˆ°äº†å¾ˆå¥½çš„å¯¦ç¾ã€‚ä»£ç¢¼è³ªé‡è¼ƒé«˜ï¼Œå…·æœ‰è‰¯å¥½çš„å¯è®€æ€§å’Œå¯ç¶­è­·æ€§ã€‚é€šééš±å–»çš„æ–¹å¼ï¼Œæˆ‘å€‘å¯ä»¥æ›´å¥½åœ°ç†è§£é€™äº›è¤‡é›œçš„æŠ€è¡“æ¦‚å¿µï¼Œå°±åƒç”¨æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ä¾‹å­ä¾†è§£é‡‹æŠ½è±¡çš„ç§‘å­¸åŸç†ä¸€æ¨£ã€‚

### 12.1 ä¸»è¦æˆå°±
- âœ… å®Œæ•´å¯¦ç¾äº†è«–æ–‡ä¸­æè¿°çš„æ‰€æœ‰æ ¸å¿ƒç®—æ³•
- âœ… æä¾›äº†å¤šç¨®å¯¦ç¾ç‰ˆæœ¬ï¼Œé©æ‡‰ä¸åŒçš„æ‡‰ç”¨å ´æ™¯
- âœ… ä»£ç¢¼çµæ§‹æ¸…æ™°ï¼Œå…·æœ‰è‰¯å¥½çš„å¯æ“´å±•æ€§
- âœ… åŒ…å«äº†è±å¯Œçš„è©•ä¼°æŒ‡æ¨™å’Œå„ªåŒ–æŠ€è¡“

### 12.2 æŠ€è¡“äº®é»
- ğŸ”¥ å‰µæ–°çš„æº«åº¦ç¸®æ”¾æŠ€è¡“æé«˜äº†æ¨¡å‹é­¯æ£’æ€§
- ğŸ”¥ å¤šç¨®ç†µè¨ˆç®—æ–¹æ³•æä¾›äº†è±å¯Œçš„ä¸ç¢ºå®šæ€§åº¦é‡
- ğŸ”¥ éˆæ´»çš„èšåˆæ–¹æ³•é©æ‡‰ä¸åŒçš„è©•ä¼°éœ€æ±‚
- ğŸ”¥ é«˜æ•ˆçš„GPUåŠ é€Ÿå’Œå…§å­˜å„ªåŒ–

### 12.3 æ‡‰ç”¨åƒ¹å€¼
é€™å€‹å¯¦ç¾ç‚ºå¾ŒçºŒçš„ç ”ç©¶å’Œæ‡‰ç”¨æä¾›äº†å …å¯¦çš„åŸºç¤ï¼Œæ˜¯ä¸€å€‹é«˜è³ªé‡çš„åƒè€ƒå¯¦ç¾ã€‚å®ƒä¸åƒ…å¯ä»¥ç›´æ¥ç”¨æ–¼èªéŸ³ç™¼éŸ³è©•ä¼°ï¼Œé‚„å¯ä»¥ä½œç‚ºå…¶ä»–èªéŸ³ç›¸é—œä»»å‹™çš„åŸºç¤æ¡†æ¶ã€‚

**éš±å–»ç¸½çµï¼š** é€™å°±åƒä¸€å€‹ç²¾å¿ƒè¨­è¨ˆçš„ç‘å£«è»åˆ€ï¼Œä¸åƒ…åŠŸèƒ½é½Šå…¨ï¼Œè€Œä¸”æ¯å€‹åŠŸèƒ½éƒ½ç¶“éç²¾å¿ƒèª¿è©¦ï¼Œèƒ½å¤ æ‡‰å°å„ç¨®è¤‡é›œçš„èªéŸ³åˆ†æä»»å‹™ã€‚ 